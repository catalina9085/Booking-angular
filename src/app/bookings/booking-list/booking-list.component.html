<div style="margin:20px;"><b>You can only cancel a booking at least 24 hours in advance.
 Cancellations made less than 24 hours before the scheduled time will not be accepted.</b>
  @if(store.errorMessage()){<p style="color:darkred">{{store.errorMessage()}}</p>}
  @if(store.successMessage()){<p style="color:green">{{store.successMessage()}}</p>}
</div>
<mat-drawer-container class="myContainer">
<mat-drawer-content>
<mat-table [dataSource]="dataSource" matSort class="mat-elevation-z8 myContainer">

  <ng-container matColumnDef="roomName">
    <mat-header-cell *matHeaderCellDef> Room name </mat-header-cell>
    <mat-cell *matCellDef="let element"> {{ element.roomName }} </mat-cell>
  </ng-container>

  <ng-container matColumnDef="group">
    <mat-header-cell *matHeaderCellDef> Group name </mat-header-cell>
    <mat-cell *matCellDef="let element"> {{ element.group.name}} </mat-cell>
  </ng-container>

  <ng-container matColumnDef="date">
    <mat-header-cell *matHeaderCellDef mat-sort-header> Date </mat-header-cell>
    <mat-cell *matCellDef="let element"> {{ element.date }} </mat-cell>
  </ng-container>

  <ng-container matColumnDef="time">
    <mat-header-cell *matHeaderCellDef mat-sort-header> Time interval </mat-header-cell>
    <mat-cell *matCellDef="let element">{{element.startTime+"-"+element.endTime}}
    </mat-cell>
  </ng-container>

  <ng-container matColumnDef="endTime">
    <mat-header-cell *matHeaderCellDef mat-sort-header> End time </mat-header-cell>
    <mat-cell *matCellDef="let element">{{element.endTime}}
    </mat-cell>
  </ng-container>


  <ng-container matColumnDef="actions">
    <mat-header-cell *matHeaderCellDef></mat-header-cell>
    <mat-cell *matCellDef="let row">
      <div style="display: flex; gap: 3px;">
        <button mat-mini-fab (click)="openMap(row)">
          <mat-icon>room</mat-icon>
        </button>
        <button mat-mini-fab [routerLink]="['/booking',row.roomId,row.id]">
          <mat-icon>edit</mat-icon>
        </button>
        <button mat-raised-button color="primary" (click)="store.cancelBooking(row.id)">
          cancel
        </button>
      </div>
    </mat-cell>
  </ng-container>

  <mat-header-row *matHeaderRowDef="columns"></mat-header-row>
  <mat-row *matRowDef="let row; columns: columns"></mat-row>
</mat-table>
<mat-paginator [pageSize]="5" [pageSizeOptions]="[5, 10,15]"></mat-paginator>

</mat-drawer-content>


<mat-drawer mode="side" #drawer position="end">
  <button mat-button (click)="closeDrawer()">close</button>
 <app-map [location]="store.currentBooking().roomLocation"></app-map>
</mat-drawer>


</mat-drawer-container>
<button mat-raised-button color="primary" (click)="downloadCsv()">download bookings as csv</button>
